<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜ | ç»´ç½—å¦®å¡å·</title>
    <meta name="description" content="å®åœ¨ä¸€æ€è¿›ï¼Œè«åœ¨ä¸€æ€åœ">
    <link rel="icon" href="/logo.jpg">
  <link rel="apple-touch-icon" href="/photo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.f9e9789a.css" as="style"><link rel="preload" href="/assets/js/app.26acc76c.js" as="script"><link rel="preload" href="/assets/js/2.49a4b4c4.js" as="script"><link rel="preload" href="/assets/js/18.5d95a728.js" as="script"><link rel="prefetch" href="/assets/js/10.f20dac00.js"><link rel="prefetch" href="/assets/js/11.88265ad1.js"><link rel="prefetch" href="/assets/js/12.74c7234e.js"><link rel="prefetch" href="/assets/js/13.16a525a0.js"><link rel="prefetch" href="/assets/js/14.48ee6933.js"><link rel="prefetch" href="/assets/js/15.9738b4a3.js"><link rel="prefetch" href="/assets/js/16.2edb7d6f.js"><link rel="prefetch" href="/assets/js/17.282fb8eb.js"><link rel="prefetch" href="/assets/js/19.bf2d4e26.js"><link rel="prefetch" href="/assets/js/20.1c93c4bb.js"><link rel="prefetch" href="/assets/js/21.bcd9b58d.js"><link rel="prefetch" href="/assets/js/22.77a36d92.js"><link rel="prefetch" href="/assets/js/23.0f8682e6.js"><link rel="prefetch" href="/assets/js/24.ebb67184.js"><link rel="prefetch" href="/assets/js/25.16ebc4ba.js"><link rel="prefetch" href="/assets/js/26.7c36c41a.js"><link rel="prefetch" href="/assets/js/3.03a0d91b.js"><link rel="prefetch" href="/assets/js/4.85f08dfc.js"><link rel="prefetch" href="/assets/js/5.dcd707ba.js"><link rel="prefetch" href="/assets/js/6.08f0e26d.js"><link rel="prefetch" href="/assets/js/7.3bd1f663.js"><link rel="prefetch" href="/assets/js/8.5ecb18c1.js"><link rel="prefetch" href="/assets/js/9.da9f94dd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9e9789a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ç»´ç½—å¦®å¡å·</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/skill/" class="nav-link router-link-active">å‰ç«¯ç›¸å…³</a></div><div class="nav-item"><a href="/life/" class="nav-link">ç”Ÿæ´»éšç¬”</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¾®åš
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/skill/" class="nav-link router-link-active">å‰ç«¯ç›¸å…³</a></div><div class="nav-item"><a href="/life/" class="nav-link">ç”Ÿæ´»éšç¬”</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¾®åš
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JSç›¸å…³</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/skill/aboutjs/js-1.html" class="sidebar-link">Daily-Interview-Questionï¼ˆèŠ‚é€‰ï¼‰</a></li><li><a href="/skill/aboutjs/js-2.html" class="active sidebar-link">é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/skill/aboutjs/js-2.html#é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜" class="sidebar-link">é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å·¥å…·ç›¸å…³</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¡¹ç›®ç›¸å…³</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜"><a href="#é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> é‡åˆ°çš„ä¸€äº›emmojiç›¸å…³çš„é—®é¢˜</h2> <p>åœ¨é¡¹ç›®é‡Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œç”¨æˆ·åé‡ŒåŒ…å«äº†emojiè¡¨æƒ…ï¼Œä½†æ˜¯ä¸ªåå­—çš„å±•ç¤ºé•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œè¶…å‡ºéƒ¨åˆ†ç”¨çœç•¥å·ä»£æ›¿</p> <h3 id="å¦‚æœåªæ˜¯æ±‰å­—ã€å­—æ¯ã€æ•°å­—"><a href="#å¦‚æœåªæ˜¯æ±‰å­—ã€å­—æ¯ã€æ•°å­—" aria-hidden="true" class="header-anchor">#</a> å¦‚æœåªæ˜¯æ±‰å­—ã€å­—æ¯ã€æ•°å­—</h3> <p>å…ˆä¸è€ƒè™‘emojiçš„æƒ…å†µï¼Œé‚£ä¹ˆä¸€è¡Œ <code>æµ‹è¯•test1234</code>çš„å®½åº¦è¯¥æ€ä¹ˆç®—ï¼Ÿ
æ±‰å­—å 2ä¸ªå®½åº¦ï¼Œæ•°å­—å’Œå­—æ¯å ä¸€ä¸ªå®½åº¦ï¼Œé‚£ä¹ˆå‡è®¾è¦æ±‚è¶…è¿‡5ä¸ªæ±‰å­—çš„å®½åº¦å°±çœç•¥å·å±•ç¤ºï¼Œåˆ™ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">shortLongName</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">5</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> str
  <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">let</span> cutBegin <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token comment">// let cutEnd = 0;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> width <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cutBegin <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cutBegin <span class="token operator">=</span> i
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> c <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token comment">// å•å­—èŠ‚åŠ 1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0x0001</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token number">0x007e</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0xff60</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token number">0xff9f</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      len<span class="token operator">++</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      len <span class="token operator">+=</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cutBegin<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'...'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> str
<span class="token punctuation">}</span>

</code></pre></div><p>è¿™é‡Œä¸»è¦æ˜¯<code>str.charCodeAt(i)</code>,å¾—åˆ°è¿™ä¸ªæ±‰å­—ã€æ•°å­—ã€å­—æ¯çš„unicodeç ï¼Œç„¶ååˆ¤æ–­æ˜¯åœ¨å“ªä¸ªåŒºé—´ï¼Œå†åŠ 1ä¸ªè¿˜æ˜¯2ä¸ªå®½åº¦å°±å¥½äº†ã€‚</p> <h3 id="åŒ…å«äº†emojiè¡¨æƒ…æœ‰ä»€ä¹ˆä¸åŒ"><a href="#åŒ…å«äº†emojiè¡¨æƒ…æœ‰ä»€ä¹ˆä¸åŒ" aria-hidden="true" class="header-anchor">#</a> åŒ…å«äº†emojiè¡¨æƒ…æœ‰ä»€ä¹ˆä¸åŒ</h3> <p><code>ğŸ˜€ ğŸ˜ ğŸ˜‚ ğŸ¤£ ğŸ¤­ ğŸ§ ğŸ¤“ ğŸ˜ˆ ğŸ‘¿ ğŸ‘¹ ğŸ‘º ğŸ’€ ğŸ‘» ğŸ‘½ ğŸ¤– ğŸ’© ğŸ˜º ğŸ˜¸ ğŸ˜¹ ğŸ˜» ğŸ˜¼ ğŸ˜½ ğŸ™€ ğŸ˜¿ ğŸ˜¾ğŸ‘ª ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ ğŸ‘©â€ğŸ‘©â€ğŸ‘§ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ ğŸ‘©â€ğŸ‘¦ ğŸ‘©â€ğŸ‘§ ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ ğŸ‘©â€ğŸ‘§â€ğŸ‘§ ğŸ‘¨â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘§ ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦</code></p> <p><code>&quot;ğŸ˜€&quot;.length</code> æ˜¯ 2<br> <code>&quot;ğŸ‘¨â€ğŸ‘©â€ğŸ‘§&quot;.length</code> æ˜¯ 8<br> <code>&quot;ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦&quot;.length</code> æ˜¯ 11</p> <p>ä¸€ä¸ªemojiè¡¨æƒ…åº”è¯¥ä¹Ÿæ˜¯å±äºä¸€ä¸ªå­—ç¬¦ï¼Œå æ®ç€Unicodeçš„ä¸€ä¸ªç ç‚¹ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä»–ä»¬é•¿åº¦å´ä¸åŒ</p> <blockquote><p>Unicode åŒ…å«ä¸€ä¸ªç³»ç»Ÿï¼Œå¯ä»¥åˆå¹¶å¤šä¸ªç¼–ç ç‚¹ï¼ŒåŠ¨æ€ç»„åˆå­—ç¬¦ã€‚æ­¤ç³»ç»Ÿç”¨å„ç§æ–¹å¼å¢åŠ çµæ´»æ€§ï¼Œè€Œä¸å¼•èµ·ç¼–ç ç‚¹çš„å·¨å¤§ç»„åˆè†¨èƒ€ã€‚å³ç»„åˆå­—ç¬¦
<a href="https://juejin.im/post/5c00b31a5188251d9e0c4a59" target="_blank" rel="noopener noreferrer">å‚è€ƒè¿™é‡Œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>æ€»ä¹‹ï¼Œå„ä¸ªä¸åŒè¡¨æƒ…çš„lengthæ˜¯ä¸åŒçš„ï¼Œæƒ³é€šè¿‡lengthæ¥åˆ¤æ–­å­—ç¬¦å®½åº¦æ˜¯è¡Œä¸é€šäº†ã€‚
è€Œä¸”<code>ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦</code>è¿™ä¸ªè¡¨æƒ…é•¿åº¦æœ‰11ï¼Œå¦‚æœéšæ„åˆ‡å‰²äº†å‡ ä½ï¼Œé¡µé¢ä¸Šè¿™ä¸ªè¡¨æƒ…å°±æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œæ˜¯ä¸ªä¹±ç ç¬¦å·ã€‚
é‚£ä¹ˆå°±éœ€è¦æŠŠ<code>ğŸ˜€ ğŸ˜ ğŸ˜‚ ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦</code>éƒ½å½“åšé•¿åº¦1ï¼ˆæˆ–2ï¼‰çš„æ™®é€šå­—ç¬¦æ¥è®¡ç®—çœŸæ­£çš„å®½åº¦</p> <p><a href="https://github.com/YingshanDeng/EmojiCharString" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>æ˜¯ä¸ªåˆ¤æ–­emojié•¿åº¦çš„å·¥å…·ï¼Œä¸»è¦å¤„ç†æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¤„ç†åŒ…å«emojiçš„å­—ç¬¦ä¸²</span>
<span class="token keyword">const</span> astralRange <span class="token operator">=</span> <span class="token regex">/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g</span>
<span class="token keyword">class</span> <span class="token class-name">EmojiCharString</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> string <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Input must be a string'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_string <span class="token operator">=</span> string
    <span class="token keyword">this</span><span class="token punctuation">.</span>_match <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>astralRange<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">length</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_match<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span>

  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_string
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Reverse the string in place
   * @return {[String]} [The reversed string]
   */</span>
  <span class="token function">reverse</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_match<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * The substring() method returns a subset of a string between begin index and end index
   * @param  {Number} begin [begin index]
   * @param  {Number} end   [end index]
   * @return {[String]}     [A new string containing the extracted section of the given string.]
   */</span>
  <span class="token function">substring</span> <span class="token punctuation">(</span><span class="token parameter">begin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> strLen <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length
    <span class="token keyword">let</span> indexStart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> indexEnd
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> end <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      indexEnd <span class="token operator">=</span> strLen
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      indexEnd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexStart <span class="token operator">&gt;</span> strLen<span class="token punctuation">)</span> <span class="token punctuation">{</span> indexStart <span class="token operator">=</span> strLen <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexEnd <span class="token operator">&gt;</span> strLen<span class="token punctuation">)</span> <span class="token punctuation">{</span> indexEnd <span class="token operator">=</span> strLen <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexStart <span class="token operator">&gt;</span> indexEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>indexStart<span class="token punctuation">,</span> indexEnd<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>indexEnd<span class="token punctuation">,</span> indexStart<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_match<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>indexStart<span class="token punctuation">,</span> indexEnd<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * The substr() method return the characters in a string beginning at the specified location through the specified number of characters.
   * @param  {Number} begin [Location at which to begin extracting characters]
   * @param  {Number} len   [The number of characters to extract]
   * @return {[String]}     [A new string containing the extracted section of the given string]
   */</span>
  <span class="token function">substr</span> <span class="token punctuation">(</span><span class="token parameter">begin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> strLen <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length
    <span class="token keyword">let</span> indexStart <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>
    <span class="token keyword">let</span> indexEnd
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexStart <span class="token operator">&gt;=</span> strLen <span class="token operator">||</span> len <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">''</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>indexStart <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      indexStart <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> indexStart <span class="token operator">+</span> strLen<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> len <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      indexEnd <span class="token operator">=</span> strLen
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      indexEnd <span class="token operator">=</span> indexStart <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_match<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>indexStart<span class="token punctuation">,</span> indexEnd<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>ä¹Ÿæ˜¯æ ¹æ®æ­£åˆ™åˆ¤æ–­æ˜¯å¦å¤„äºemojiçš„unicodeèŒƒå›´
ç°åœ¨å¯ä»¥æŠŠæ¯ä¸ªemojiè¡¨æƒ…å½“åšä¸€ä¸ªå•ä½çš„å­—ç¬¦æ¥å¤„ç†äº†ï¼Œå‰©ä¸‹çš„åˆ¤æ–­é•¿åº¦ï¼Œè¶…å‡ºæˆªæ–­å°±å¥½åšäº†ã€‚
å¤§æ¦‚æ­¥éª¤ï¼š</p> <ol><li>const str1 = new EmojiCharString(str) å¤„ç†ä¸€ä¸‹</li> <li>å¦‚æœstr.length &lt; str1.length è¯´æ˜æœ‰emojiè¡¨æƒ…</li> <li>å¯¹str1è¿›è¡Œéå†,ç„¶åå¤„ç†æ¯ä¸ªå­—ç¬¦/æ±‰å­—/emoji</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åŒ…å«emoji</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> emojiStr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">12</span> <span class="token operator">&amp;&amp;</span> cutBegin <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cutBegin <span class="token operator">=</span> i
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> char <span class="token operator">=</span> emojiStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// è·å–åˆ°å…·ä½“çš„æŸä¸ªè¡¨æƒ…æˆ–è€…å­—ç¬¦</span>
    <span class="token keyword">const</span> isEmoji <span class="token operator">=</span> char<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token comment">// emojiçš„lengthéƒ½æ˜¯å¤§äº1çš„ï¼Œè€Œå•ä¸ªå­—æ¯ã€æ±‰å­—lengthä¸º1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isEmoji<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      len <span class="token operator">+=</span> char<span class="token punctuation">.</span>length
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> c <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0x0001</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token number">0x007e</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0xff60</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token number">0xff9f</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        len<span class="token operator">++</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        len <span class="token operator">+=</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>å‰©ä¸‹çš„å°±æ˜¯åˆ¤æ–­lenï¼Œè¶…è¿‡é™å®šçš„è¯ï¼Œåœ¨cutBeginè¿™é‡Œæˆªæ–­ã€‚æ³¨æ„è¿™é‡Œçš„cutBeginæ˜¯æŠŠemojiå½“ä¸€ä¸ªé•¿åº¦å¤„ç†åçš„èµ·å§‹ä½ç½®ã€‚</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°äº: </span> <span class="time">7/20/2019, 6:52:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/skill/aboutjs/js-1.html" class="prev">
          Daily-Interview-Questionï¼ˆèŠ‚é€‰ï¼‰
        </a></span> <span class="next"><a href="/skill/tools/markdown.html">
          markdownæ‰€å¸¸ç”¨çš„ä¸€äº›è¯­æ³•
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26acc76c.js" defer></script><script src="/assets/js/2.49a4b4c4.js" defer></script><script src="/assets/js/18.5d95a728.js" defer></script>
  </body>
</html>
